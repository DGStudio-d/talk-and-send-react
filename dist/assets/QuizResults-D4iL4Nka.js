import{c as Q,d as _,u as L,a as M,j as e,J as R}from"./index-BbbxppCW.js";import{C as j,b as T,c as B,a as P}from"./card-zbz7qCJr.js";import{B as o}from"./button-CIKh5vM4.js";import{B as S}from"./badge-B57fkYpB.js";import{S as g}from"./skeleton-TmsLY8PM.js";import{Q as I}from"./QuizQuestionDisplay-D6_UEnJi.js";import{d as E,u as F}from"./useQuizAttempts-BC2VXcJH.js";import{M as d}from"./MainLayout-BALAcp-P.js";import{u as J}from"./useTranslation-CC21zoU6.js";import{C as f}from"./circle-check-Dsibk6Jb.js";import{C as N}from"./circle-x-CAdb3oZW.js";import{T as z}from"./target-Dx8SBibj.js";import{C as $}from"./clock-BfSKEJpp.js";import{A as D}from"./arrow-left-DgJDJzNN.js";import"./useQuery-BIga7gMY.js";import"./useMutation-C5-Yw93X.js";import"./useInfiniteQuery-B5ANnVOJ.js";import"./useResponsiveLogo-oJ2RCBfb.js";import"./LanguageSwitcher-CFBw11ZH.js";import"./index-CNkEgW_D.js";import"./Combination-dIoxx1Zk.js";import"./index-CKCShlFX.js";import"./index-CrWK1cfR.js";import"./check-BhLxpiQA.js";import"./Logo-qwv8thKT.js";import"./user-CgQqfPiY.js";import"./log-out-CEU61esy.js";import"./users-8lpkJKwV.js";import"./book-open-SIfqpxXT.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=Q("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),ze=()=>{var x,u,p,h;const{id:w}=_(),c=L(),{t:r}=J(),{locale:y}=M(),q=parseInt(w||"0"),{data:s,isLoading:v,isError:b}=E(q),l=F(),C=async()=>{var t,n;if(s!=null&&s.quiz_id)try{const a=await l.mutateAsync(s.quiz_id);c(`/quizzes/${s.quiz_id}/take/${a.id}`)}catch(a){R.error(((n=(t=a.response)==null?void 0:t.data)==null?void 0:n.message)||r("quiz.errorStartingQuiz"))}};if(v)return e.jsx(d,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(g,{className:"h-32 w-full"}),e.jsx(g,{className:"h-96 w-full"})]})});if(b||!s)return e.jsx(d,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-red-600",children:r("quiz.errorLoadingResults")}),e.jsx(o,{onClick:()=>c("/attempts"),children:r("quiz.backToAttempts")})]})})});const k=((x=s.quiz)==null?void 0:x.title[y])||((u=s.quiz)==null?void 0:u.title.en)||r("quiz.untitled"),i=s==null?void 0:s.attempt.is_passed,m=((p=s.answers)==null?void 0:p.map(t=>t.question))||[],A=new Map(((h=s.answers)==null?void 0:h.map(t=>[t.quiz_question_id,t]))||[]);return e.jsx(d,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{className:i?"border-green-500":"border-red-500",children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsx(B,{className:"text-2xl",children:k}),e.jsx(S,{variant:i?"default":"destructive",className:i?"bg-green-500 hover:bg-green-600":"",children:i?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-4 h-4 mr-1"}),r("quiz.passed")]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4 mr-1"}),r("quiz.failed")]})})]})}),e.jsxs(P,{children:[e.jsx("div",{className:"flex justify-center mb-6",children:i?e.jsx("div",{className:"w-24 h-24 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(f,{className:"w-16 h-16 text-green-600"})}):e.jsx("div",{className:"w-24 h-24 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx(N,{className:"w-16 h-16 text-red-600"})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx(z,{className:"w-8 h-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:r("quiz.score")}),e.jsxs("p",{className:"text-2xl font-bold",children:[s==null?void 0:s.attempt.correct_answers,"/",s==null?void 0:s.attempt.total_questions]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx(z,{className:"w-8 h-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:r("quiz.percentage")}),e.jsxs("p",{className:"text-2xl font-bold",children:[s==null?void 0:s.attempt.percentage,"%"]})]})]}),s.duration&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg",children:[e.jsx($,{className:"w-8 h-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:r("quiz.duration")}),e.jsx("p",{className:"text-2xl font-bold",children:s.duration})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mt-6 justify-center",children:[e.jsxs(o,{variant:"outline",onClick:()=>c("/quizzes"),children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),r("quiz.backToQuizzes")]}),e.jsxs(o,{onClick:C,disabled:l.isPending,className:"bg-primary-500 hover:bg-primary-600",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),l.isPending?r("quiz.starting"):r("quiz.retakeQuiz")]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:r("quiz.reviewAnswers")}),m.length?m.map((t,n)=>{const a=A.get(t.id);return e.jsx(I,{question:t,questionNumber:n+1,selectedOption:a==null?void 0:a.selected_option,showCorrectAnswer:!0},t.id)}):e.jsx("p",{className:"text-gray-500",children:r("quiz.noQuestionsAvailable")})]})]})})};export{ze as QuizResults,ze as default};
