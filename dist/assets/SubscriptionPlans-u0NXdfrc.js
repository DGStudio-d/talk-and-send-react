import{c as $,u as H,r as g,j as s,J as f}from"./index-BbbxppCW.js";import{u as T,a as E,b as F}from"./useSubscriptions-CXEXM7mV.js";import{u as I}from"./useLanguages-joHChLWq.js";import{M as q}from"./MainLayout-BALAcp-P.js";import{C as x,b as N,a as h,d as y,c as J,e as U}from"./card-zbz7qCJr.js";import{B as V}from"./button-CIKh5vM4.js";import{S as G,a as O,b as R,c as z,d as j}from"./select-Djc9bocP.js";import{S as c}from"./skeleton-TmsLY8PM.js";import{B as K}from"./badge-B57fkYpB.js";import{A as Q,a as W,b as X,c as Y,d as Z,e as ss,f as es,g as is}from"./alert-dialog-BMVIkOSi.js";import{a as d}from"./translationHelpers-BzGVKULz.js";import{u as as}from"./useTranslation-CC21zoU6.js";import{C as rs}from"./clock-BfSKEJpp.js";import{U as ts}from"./users-8lpkJKwV.js";import"./useQuery-BIga7gMY.js";import"./useMutation-C5-Yw93X.js";import"./useResponsiveLogo-oJ2RCBfb.js";import"./LanguageSwitcher-CFBw11ZH.js";import"./index-CNkEgW_D.js";import"./Combination-dIoxx1Zk.js";import"./index-CKCShlFX.js";import"./index-CrWK1cfR.js";import"./check-BhLxpiQA.js";import"./Logo-qwv8thKT.js";import"./user-CgQqfPiY.js";import"./log-out-CEU61esy.js";import"./book-open-SIfqpxXT.js";import"./index-wpz6Hu0Z.js";import"./index-BtDOLYso.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=$("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Ts=()=>{const{t:i,i18n:n}=as(),S=H(),[a,v]=g.useState(null),[r,C]=g.useState(null),[D,m]=g.useState(!1),{data:u,isLoading:L}=I(),{data:P,isLoading:w}=T(),{data:A,isLoading:_}=E(a||0),t=F(),p=a?A:P,k=a?_:w,M=e=>{C(e),m(!0)},B=async()=>{var e,l;if(r)try{const o={subscription_plan_id:r.id,payment_method:"bank_transfer"};r.type==="group"&&(o.group_name="My Study Group"),await t.mutateAsync(o),f.success(i("subscription.subscribeSuccess")),m(!1),S("/subscriptions/my-subscriptions")}catch(o){f.error(((l=(e=o.response)==null?void 0:e.data)==null?void 0:l.message)||i("subscription.subscribeError"))}},b=e=>{const l=d(e.language,n.language);return`${i(`subscription.${e.type}`)} - ${l}`};return s.jsxs(q,{children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:i("subscription.plans")}),s.jsx("p",{className:"text-muted-foreground mt-2",children:i("subscription.plansDescription")})]}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("label",{htmlFor:"language-filter",className:"text-sm font-medium",children:i("subscription.filterByLanguage")}),s.jsxs(G,{value:(a==null?void 0:a.toString())||"all",onValueChange:e=>v(e==="all"?null:parseInt(e)),children:[s.jsx(O,{id:"language-filter",className:"w-[200px]",children:s.jsx(R,{placeholder:i("subscription.allLanguages")})}),s.jsxs(z,{children:[s.jsx(j,{value:"all",children:i("subscription.allLanguages")}),L?s.jsx(j,{value:"loading",disabled:!0,children:i("common.loading")}):u==null?void 0:u.map(e=>s.jsx(j,{value:e.id.toString(),children:d(e,n.language)},e.id))]})]})]}),k?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>s.jsxs(x,{children:[s.jsxs(N,{children:[s.jsx(c,{className:"h-6 w-3/4"}),s.jsx(c,{className:"h-4 w-full mt-2"})]}),s.jsx(h,{children:s.jsx(c,{className:"h-20 w-full"})}),s.jsx(y,{children:s.jsx(c,{className:"h-10 w-full"})})]},e))}):p&&p.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(e=>s.jsxs(x,{className:"flex flex-col",children:[s.jsxs(N,{children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx(J,{children:b(e)}),s.jsx(K,{variant:e.type==="individual"?"default":"secondary",children:i(`subscription.${e.type}`)})]}),s.jsx(U,{children:i("subscription.planDescription",{type:i(`subscription.${e.type}`),language:d(e.language,n.language)})})]}),s.jsxs(h,{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ns,{className:"h-5 w-5 text-muted-foreground"}),s.jsx("span",{className:"text-2xl font-bold",children:e.price})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(rs,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:[e.sessions_per_month," ",i("subscription.sessions")," Ã— ",e.session_duration_minutes," ",i("subscription.minutes")]})]}),e.type==="group"&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(ts,{className:"h-4 w-4 text-muted-foreground"}),s.jsxs("span",{children:[i("subscription.maxMembers"),": ",e.max_group_members]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[i("common.language"),": ",d(e.language,n.language)]})]}),s.jsx(y,{children:s.jsx(V,{className:"w-full",onClick:()=>M(e),disabled:t.isPending,children:t.isPending?i("common.loading"):i("subscription.subscribe")})})]},e.id))}):s.jsx(x,{children:s.jsx(h,{className:"py-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:i("subscription.noPlansAvailable")})})})]}),s.jsx(Q,{open:D,onOpenChange:m,children:s.jsxs(W,{children:[s.jsxs(X,{children:[s.jsx(Y,{children:i("subscription.confirmSubscription")}),s.jsx(Z,{children:r&&s.jsxs("div",{className:"space-y-2 mt-4",children:[s.jsxs("p",{children:[s.jsxs("strong",{children:[i("subscription.plan"),":"]})," ",b(r)]}),s.jsxs("p",{children:[s.jsxs("strong",{children:[i("subscription.price"),":"]})," ",r.price]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:i("subscription.confirmSubscriptionMessage")})]})})]}),s.jsxs(ss,{children:[s.jsx(es,{children:i("common.cancel")}),s.jsx(is,{onClick:B,disabled:t.isPending,children:t.isPending?i("common.loading"):i("common.confirm")})]})]})})]})};export{Ts as default};
