import{u as b,j as e}from"./index-BbbxppCW.js";import{C as t,a as i,b as d,c as u}from"./card-zbz7qCJr.js";import{B as x}from"./button-CIKh5vM4.js";import{S as n}from"./skeleton-TmsLY8PM.js";import{a as w,R as z,T as C,B as _,C as k}from"./generateCategoricalChart-BfMwPfyn.js";import{M as h}from"./MainLayout-BALAcp-P.js";import{u as T}from"./useTranslation-CC21zoU6.js";import{B}from"./book-open-SIfqpxXT.js";import{U as q}from"./users-8lpkJKwV.js";import{T as D,A as Q,B as A,C as L,X as R,Y as S}from"./BarChart-C4TiHdvz.js";import"./useQuery-BIga7gMY.js";import"./useResponsiveLogo-oJ2RCBfb.js";import"./LanguageSwitcher-CFBw11ZH.js";import"./index-CNkEgW_D.js";import"./Combination-dIoxx1Zk.js";import"./index-CKCShlFX.js";import"./index-CrWK1cfR.js";import"./check-BhLxpiQA.js";import"./Logo-qwv8thKT.js";import"./user-CgQqfPiY.js";import"./log-out-CEU61esy.js";const O=({active:a,payload:l,t:s})=>a&&l&&l.length?e.jsx(t,{className:"shadow-lg",children:e.jsxs(i,{className:"p-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l[0].payload.title}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s("dashboard.attempts"),": ",e.jsx("span",{className:"font-semibold",children:l[0].value})]})]})}):null,ie=()=>{var j;const{t:a}=T(),l=b(),{data:s,isLoading:N,isError:y,refetch:v}=w();if(N)return e.jsx(h,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:a("dashboard.teacherDashboard")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(r=>e.jsx(t,{children:e.jsxs(i,{className:"p-6",children:[e.jsx(n,{className:"h-4 w-24 mb-2"}),e.jsx(n,{className:"h-8 w-16"})]})},r))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(n,{className:"h-6 w-32"})}),e.jsx(i,{children:e.jsx(n,{className:"h-64 w-full"})})]}),e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(n,{className:"h-6 w-32"})}),e.jsx(i,{children:e.jsx(n,{className:"h-64 w-full"})})]})]})]})});if(y)return e.jsx(h,{children:e.jsx("div",{children:e.jsx(t,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-red-600",children:a("dashboard.errorLoading")}),e.jsx(x,{onClick:()=>v(),children:a("common.retry")})]})})})});const m=((j=s==null?void 0:s.recent_quizzes)==null?void 0:j.slice(0,5).map(r=>{var c;return{title:((c=r.title)==null?void 0:c.en)||r.title||a("quiz.untitled"),attempts:r.attempts_count||0}}))||[],o=["#22c55e","#16a34a","#15803d","#166534","#14532d"];return e.jsx(h,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:a("dashboard.teacherDashboard")}),e.jsx(x,{onClick:()=>l("/teacher/quizzes/create"),children:a("teacher.createQuiz")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(t,{children:e.jsxs(i,{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:a("dashboard.createdQuizzes")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(s==null?void 0:s.created_quizzes)||0})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(B,{className:"w-6 h-6 text-primary-600"})})})]})}),e.jsx(t,{children:e.jsxs(i,{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:a("dashboard.totalAttempts")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(s==null?void 0:s.teacher_total_attempts)||0})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"w-6 h-6 text-primary-600"})})})]})}),e.jsx(t,{children:e.jsxs(i,{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:a("teacher.averageStudentScore")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s!=null&&s.teacher_average_score?`${s.teacher_average_score.toFixed(1)}%`:"0%"})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(D,{className:"w-6 h-6 text-primary-600"})})})]})}),e.jsx(t,{children:e.jsxs(i,{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:a("teacher.activeQuizzes")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(s==null?void 0:s.active_quizzes)||0})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(Q,{className:"w-6 h-6 text-primary-600"})})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(u,{children:a("teacher.quizPerformance")})}),e.jsx(i,{children:m.length>0?e.jsx(z,{width:"100%",height:300,children:e.jsxs(A,{data:m,children:[e.jsx(L,{strokeDasharray:"3 3"}),e.jsx(R,{dataKey:"title"}),e.jsx(S,{}),e.jsx(C,{content:e.jsx(O,{t:a})}),e.jsx(_,{dataKey:"attempts",radius:[8,8,0,0],children:m.map((r,c)=>e.jsx(k,{fill:o[c%o.length]},`cell-${c}`))})]})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:a("teacher.noQuizData")})})]}),e.jsxs(t,{children:[e.jsx(d,{children:e.jsx(u,{children:a("teacher.recentQuizzes")})}),e.jsx(i,{children:s!=null&&s.recent_quizzes&&s.recent_quizzes.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:s.recent_quizzes.slice(0,5).map(r=>{var c,p,f,g;return e.jsx(t,{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>l(`/teacher/quizzes/${r.id}/questions`),children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:((c=r.title)==null?void 0:c.en)||r.title||a("quiz.untitled")}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[((f=(p=r.language)==null?void 0:p.name)==null?void 0:f.en)||((g=r.language)==null?void 0:g.name)," â€¢ ",a("levels."+(r.level||"beginner").toLowerCase())]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[r.questions_count||0," ",a("quiz.questions")]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.attempts_count||0," ",a("dashboard.attempts")]})]})]})})},r.id)})}):e.jsxs("div",{className:"h-64 flex flex-col items-center justify-center text-gray-500",children:[e.jsx("p",{children:a("teacher.noRecentQuizzes")}),e.jsx(x,{variant:"outline",className:"mt-4",onClick:()=>l("/teacher/quizzes/create"),children:a("teacher.createFirstQuiz")})]})})]})]})]})})};export{ie as TeacherDashboard,ie as default};
