import{j as e}from"./index-BbbxppCW.js";import{C as a,a as t,b as m,c as p}from"./card-zbz7qCJr.js";import{B as N}from"./button-CIKh5vM4.js";import{S as i}from"./skeleton-TmsLY8PM.js";import{A as u}from"./AttemptCard-Q6WAcIqk.js";import{u as b,R as y,T as v,B as w,C}from"./generateCategoricalChart-BfMwPfyn.js";import{M as x}from"./MainLayout-BALAcp-P.js";import{u as _}from"./useTranslation-CC21zoU6.js";import{B as A}from"./book-open-SIfqpxXT.js";import{T as D}from"./target-Dx8SBibj.js";import{T,A as k,B,C as L,X as S,Y as R}from"./BarChart-C4TiHdvz.js";import"./badge-B57fkYpB.js";import"./circle-check-Dsibk6Jb.js";import"./circle-x-CAdb3oZW.js";import"./calendar-BGtI_0eA.js";import"./useQuery-BIga7gMY.js";import"./useResponsiveLogo-oJ2RCBfb.js";import"./LanguageSwitcher-CFBw11ZH.js";import"./index-CNkEgW_D.js";import"./Combination-dIoxx1Zk.js";import"./index-CKCShlFX.js";import"./index-CrWK1cfR.js";import"./check-BhLxpiQA.js";import"./Logo-qwv8thKT.js";import"./user-CgQqfPiY.js";import"./log-out-CEU61esy.js";import"./users-8lpkJKwV.js";const O=({active:r,payload:s,t:d})=>r&&s&&s.length?e.jsx(a,{className:"shadow-lg",children:e.jsxs(t,{className:"p-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:d("levels."+s[0].payload.level.toLowerCase())}),e.jsxs("p",{className:"text-sm text-gray-600",children:[d("dashboard.attempts"),": ",e.jsx("span",{className:"font-semibold",children:s[0].value})]})]})}):null,ce=()=>{var h,j;const{t:r}=_(),{data:s,isLoading:d,isError:g,refetch:f}=b();if(d)return e.jsx(x,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:r("dashboard.studentDashboard")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(l=>e.jsx(a,{children:e.jsxs(t,{className:"p-6",children:[e.jsx(i,{className:"h-4 w-24 mb-2"}),e.jsx(i,{className:"h-8 w-16"})]})},l))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsx(m,{children:e.jsx(i,{className:"h-6 w-32"})}),e.jsx(t,{children:e.jsx(i,{className:"h-64 w-full"})})]}),e.jsxs(a,{children:[e.jsx(m,{children:e.jsx(i,{className:"h-6 w-32"})}),e.jsx(t,{children:e.jsx(i,{className:"h-64 w-full"})})]})]})]})});if(g)return e.jsx(x,{children:e.jsx("div",{children:e.jsx(a,{className:"p-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-red-600",children:r("dashboard.errorLoading")}),e.jsx(N,{onClick:()=>f(),children:r("common.retry")})]})})})});const c=s!=null&&s.level_distribution?Object.entries(s.level_distribution).map(([l,n])=>({level:l,count:n})):[],o=["#22c55e","#16a34a","#15803d","#166534","#14532d","#052e16"];return e.jsx(x,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:r("dashboard.studentDashboard")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(a,{children:e.jsxs(t,{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r("dashboard.completedAttempts")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(s==null?void 0:s.completed_attempts)||0})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(A,{className:"w-6 h-6 text-primary-600"})})})]})}),e.jsx(a,{children:e.jsxs(t,{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r("dashboard.averageScore")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s!=null&&s.average_score?`${s.average_score.toFixed(1)}%`:"0%"})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(D,{className:"w-6 h-6 text-primary-600"})})})]})}),e.jsx(a,{children:e.jsxs(t,{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r("dashboard.languageProgress")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:((h=s==null?void 0:s.preferred_language_progress)==null?void 0:h.attempts)||0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:((j=s==null?void 0:s.preferred_language_progress)==null?void 0:j.language_name)||r("dashboard.noPreference")})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"w-6 h-6 text-primary-600"})})})]})}),e.jsx(a,{children:e.jsxs(t,{className:"flex items-center justify-between p-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:r("dashboard.levelsAttempted")}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:c.length})]}),e.jsx("div",{className:"flex-shrink-0 ml-4",children:e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(k,{className:"w-6 h-6 text-primary-600"})})})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsx(m,{children:e.jsx(p,{children:r("dashboard.levelDistribution")})}),e.jsx(t,{children:c.length>0?e.jsx(y,{width:"100%",height:300,children:e.jsxs(B,{data:c,children:[e.jsx(L,{strokeDasharray:"3 3"}),e.jsx(S,{dataKey:"level"}),e.jsx(R,{}),e.jsx(v,{content:e.jsx(O,{t:r})}),e.jsx(w,{dataKey:"count",radius:[8,8,0,0],children:c.map((l,n)=>e.jsx(C,{fill:o[n%o.length]},`cell-${n}`))})]})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:r("dashboard.noLevelData")})})]}),e.jsxs(a,{children:[e.jsx(m,{children:e.jsx(p,{children:r("dashboard.recentAttempts")})}),e.jsx(t,{children:s!=null&&s.recent_attempts&&s.recent_attempts.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:s.recent_attempts.slice(0,5).map(l=>e.jsx(u,{attempt:l},l.id))}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:r("dashboard.noRecentAttempts")})})]})]})]})})};export{ce as StudentDashboard,ce as default};
